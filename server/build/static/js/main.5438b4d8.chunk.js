(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{268:function(e,a,t){e.exports=t(606)},275:function(e,a,t){},277:function(e,a,t){},283:function(e,a,t){},292:function(e,a,t){},325:function(e,a){},328:function(e,a){},331:function(e,a){},335:function(e,a){},360:function(e,a){},362:function(e,a){},371:function(e,a){},373:function(e,a){},383:function(e,a){},385:function(e,a){},502:function(e,a){},504:function(e,a){},511:function(e,a){},512:function(e,a){},606:function(e,a,t){"use strict";t.r(a);var i=t(0),r=t.n(i),n=t(44),s=t.n(n);t(273),t(275),t(277);var o=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center justify-content-lg-around align-items-center mb-5 w-100"},r.a.createElement("div",{className:"col-md-12 col-lg-1 text-center text-md-center"},r.a.createElement("img",{src:window.origin+"/img/hero.png",alt:"layer",className:"layer h-auto"})),r.a.createElement("div",{className:"col-lg-3 col-md-12 position-relative py-2 py-lg-0"},r.a.createElement("h4",{className:"text-white fw-bolder text-center text-uppercase mt-lg-0 mt-md-1 hero_sold"},"HERO SOLD"),r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:window.origin+"/img/short_bar.png",alt:"layer",className:"w-100 bar img-short"}),r.a.createElement("div",{className:"position-absolute text-center quantity"},"47945000"))),r.a.createElement("div",{className:"col-12 col-lg-6 col-md-10 textInput position-relative",style:{marginBottom:10,cursor:"pointer"}},r.a.createElement("div",{className:"position-relative"},r.a.createElement("img",{src:window.origin+"/img/bar.png",alt:"input",className:"input_long w-100 h-auto position-absolute"})),r.a.createElement("div",{className:"position-absolute text-center hero_address w-100",onClick:function(){return window.open("https://testnet.bscscan.com/address/0x000000000000000000000000000")}},"0x000000000000000000000000000"),r.a.createElement("span",{className:"cursor-pointer",onClick:function(){return navigator.clipboard.writeText("0x000000000000000000000000000")}},r.a.createElement("img",{src:window.origin+"/img/copy.png",alt:"button",className:"position-absolute button_copy"})))),r.a.createElement("div",{className:"row justify-content-around mt-5"},r.a.createElement("div",{className:"col-9 col-md-5"},r.a.createElement("div",{className:"detail-hero position-relative mb-3"},r.a.createElement("img",{src:window.origin+"/img/outstanding.png",alt:"",className:"w-100"}),r.a.createElement("h2",{className:"text-white fw-bolder text-center position-absolute text w-100 bottom-0 h5"},"MANAGE HEROS")),r.a.createElement("div",{className:"text-white fw-550 detail px-0 px-md-4 h6"},"Users can acquire new heroes via rescue missions. In some maps, there is a rare chance users meet a prison block which locked a bomber hero. After accomplishing the rescue mission, you will receive a damaged hero, which needs to be recovered a while before it can go wild again.")),r.a.createElement("div",{className:"col-9 col-md-5"},r.a.createElement("div",{className:"detail-hero position-relative mb-3"},r.a.createElement("img",{src:window.origin+"/img/outstanding.png",alt:"",className:"w-100"}),r.a.createElement("h2",{className:"text-white fw-bolder text-center position-absolute text w-100 bottom-0 h5"},"ARENA BATTLE")),r.a.createElement("div",{className:"text-white fw-550 detail px-0 px-md-4 h6"},"Players choose a hero to join a bomb battle with many other players. Users have to pay a certain amount of tokens to participate in battle mode, the final winner will receive the entire loser\u2019s token amount. Bomber Hero will also lose a certain amount of energy when participating in battle mode.")))))},c=t(28),m=t(21),l=t.n(m),u=t(50),p=t(22),g=t(11),h=t(14),d=t(3),f=t(5),y=t(6),E=t(54),w=(t(283),t(264)),x=t(19),v=t(262),k=Object(v.a)();function b(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var t,i=Object(d.a)(e);if(a){var r=Object(d.a)(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return Object(h.a)(this,t)}}var S,M,_,N,A,O,C=.7;var T=function(){var e=Object(i.useRef)(),a=Object(i.useRef)(),t=Object(i.useRef)(),n=Object(i.useState)(),s=Object(E.a)(n,2),o=s[0],m=s[1],h=Object(c.c)(function(e){return e.app}),d=h.currentRoom,v=h.playerDetail,T=Object(x.f)();return Object(i.useEffect)(function(){if(e&&e.current){var i=e.current.getContext("2d");i&&m(i)}if(o){var r=function(e){k.emit("player_do_action",Object(p.a)({},e,{roomId:d.roomId,who:v.isHost?"fighter1":"fighter2"}))},n=function(e,a){if(a)switch(e){case"ArrowRight":S.keys.ArrowRight.pressed=!1;break;case"ArrowLeft":S.keys.ArrowLeft.pressed=!1}else switch(e){case"ArrowRight":M.keys.ArrowRight.pressed=!1;break;case"ArrowLeft":M.keys.ArrowLeft.pressed=!1}},s=function(e){A||(n(e.key,v.isHost),r({key:e.key,type:"UP"}))},c=function(e,a){var t=!0;switch(e){case"ArrowRight":a.keys.ArrowRight.pressed?t=!1:a.keys.ArrowRight.pressed=!0,a.lastKey=e;break;case"ArrowLeft":a.keys.ArrowLeft.pressed?t=!1:a.keys.ArrowLeft.pressed=!0,a.lastKey=e;break;case" ":a.attack();break;case"ArrowUp":a.isJumping||(a.isJumping=!0,setTimeout(function(){a.isJumping=!1},800),a.velocity.y=-15)}return t},h=function(e,a){return c(e,a?S:M)},E=function(e){A||h(e.key,v.isHost)&&r({key:e.key,type:"DOWN"})},x=function(){var e=Object(u.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(function(){t.current&&(t.current.innerHTML="FIGHT!"),window.addEventListener("keyup",s),window.addEventListener("keydown",E),setTimeout(function(){t.current&&(t.current.innerHTML="")},500)},3e3);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(l.a.mark(function e(a){var t,i,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.key,i=a.type,r=a.who,v.isHost&&"fighter2"===r?"UP"===i?n(t,!1):"DOWN"===i&&h(t,!1):v.isHost||"fighter1"!==r||("UP"===i?n(t,!0):"DOWN"===i&&h(t,!0));case 2:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),H=function(e){e.keys.ArrowLeft.pressed&&"ArrowLeft"===e.lastKey?(e.position.x<=e.minX?(e.position.x=e.minX+1,e.velocity.x=0):e.velocity.x=-5,e.switchSprite("run")):e.keys.ArrowRight.pressed&&"ArrowRight"===e.lastKey?(e.position.x>=e.maxX?(e.position.x=e.maxX-1,e.velocity.x=0):e.velocity.x=5,e.switchSprite("run")):(e.velocity.x=0,e.switchSprite("idle")),e.velocity.y<0&&e&&!e.isJumping?(e.switchSprite("jump"),e.isJumping=!0):e.velocity.y>0&&e.switchSprite("fall")},I=function(e,a,t){(function(e){var a=e.rectangle1,t=e.rectangle2;return a.attackBox.position.x+a.attackBox.width>=t.position.x&&a.attackBox.position.x<=t.position.x+t.width&&a.attackBox.position.y+a.attackBox.height>=t.position.y&&a.attackBox.position.y<=t.position.y+t.height})({rectangle1:e,rectangle2:a})&&e.isAttacking&&4===e.framesCurrent&&(a.takeHit(e.damage),e.isAttacking=!1,w.a.to(t,{width:a.health/a.hp*100+"%"})),e.isAttacking&&4===e.framesCurrent&&(e.isAttacking=!1)},R=function(){var e=Object(u.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S&&M){e.next=2;break}return e.abrupt("return");case 2:H(v.isHost?S:M),H(v.isHost?M:S),I(v.isHost?S:M,v.isHost?M:S,v.isHost?"#enemyHealth":"#playerHealth"),I(v.isHost?M:S,v.isHost?S:M,v.isHost?"#playerHealth":"#enemyHealth"),(S.health<=0||M.health<=0)&&(A||(D(),B()));case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),D=function(){a.current&&(a.current.innerHTML=0);var e=document.getElementById("displayText");e&&(S.health===S.hp&&M.health===M.hp?e.innerHTML="Tie":S.health>M.health?e.innerHTML=d.players[0].playerName+" win!":S.health<M.health&&(e.innerHTML=d.players[1].playerName+" win!"))},L=function(){var e=Object(u.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O=requestAnimationFrame(L),o.fillRect(0,0,1024,576),o.fillStyle="black",o.fillRect(0,0,1024,576),N.update(o),_.update(o),o.fillStyle="rgba(255, 255, 255, 0.15)",o.fillRect(0,0,1024,576),S&&M&&(S.update(o,576),M.update(o,576),S.velocity.x=0,M.velocity.x=0,A?(S.velocity.x=0,S.isAttacking=!1,S.isJumping=!1,S.switchSprite("idle"),M.velocity.x=0,M.isAttacking=!1,M.isJumping=!1,M.switchSprite("idle")):R());case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),B=function(){console.log("gameOver"),k.emit("battle_off",{roomId:d.roomId}),window.removeEventListener("keyup",s,!0),window.removeEventListener("keydown",E,!0),S.velocity.x=0,S.isAttacking=!1,S.isJumping=!1,S.update(o,576),M.velocity.x=0,M.isAttacking=!1,M.isJumping=!1,M.update(o,576),A=!0,setTimeout(function(){T.push("/waiting-room")},2e3)},F=function(){function e(a){var t=a.position,i=a.imageSrc,r=a.scale,n=void 0===r?1:r,s=a.framesMax,o=void 0===s?1:s,c=a.offset,m=void 0===c?{x:0,y:0}:c;Object(f.a)(this,e),this.position=t,this.width=50,this.height=150,this.image=new Image,this.image.src=i,this.scale=n,this.framesMax=o,this.framesCurrent=0,this.framesElapsed=0,this.framesHold=5,this.offset=m}return Object(y.a)(e,[{key:"draw",value:function(e){e.drawImage(this.image,this.framesCurrent*(this.image.width/this.framesMax),0,this.image.width/this.framesMax,this.image.height,this.position.x-this.offset.x,this.position.y-this.offset.y,this.image.width/this.framesMax*this.scale,this.image.height*this.scale)}},{key:"animateFrames",value:function(){this.framesElapsed++,this.framesElapsed%this.framesHold===0&&(this.framesCurrent<this.framesMax-1?this.framesCurrent++:this.framesCurrent=0)}},{key:"update",value:function(e){this.draw(e),this.animateFrames()}}]),e}(),U=function(e){Object(g.a)(t,e);var a=b(t);function t(e){var i,r=e.position,n=e.velocity,s=e.color,o=void 0===s?"red":s,c=e.imageSrc,m=e.scale,l=void 0===m?1:m,u=e.framesMax,p=void 0===u?1:u,g=e.offset,h=void 0===g?{x:0,y:0}:g,d=e.sprites,y=e.minX,E=e.maxX,w=e.attackBox,x=void 0===w?{offset:{},width:void 0,height:void 0}:w,v=e.attackSpeed,k=e.damage,b=e.defense,S=e.hp;for(var M in Object(f.a)(this,t),(i=a.call(this,{position:r,imageSrc:c,scale:l,framesMax:p,offset:h})).minX=y,i.maxX=E,i.velocity=n,i.width=50,i.height=150,i.lastKey="",i.isJumping=!1,i.attackBox={position:{x:i.position.x,y:i.position.y},offset:x.offset,width:x.width,height:x.height},i.color=o,i.isAttacking=!1,i.health=S,i.framesCurrent=0,i.framesElapsed=0,i.framesHold=5,i.sprites=d,i.dead=!1,i.lastTimeAttack=(new Date).getTime(),i.attackSpeed=v,i.damage=k,i.defense=b,i.hp=S,i.keys={ArrowRight:{pressed:!1},ArrowLeft:{pressed:!1}},i.sprites)d[M].image=new Image,d[M].image.src=d[M].imageSrc;return i}return Object(y.a)(t,[{key:"update",value:function(e,a){this.draw(e),this.dead||this.animateFrames(),this.attackBox.position.x=this.position.x+this.attackBox.offset.x,this.attackBox.position.y=this.position.y+this.attackBox.offset.y,e.fillRect(this.attackBox.position.x,this.attackBox.position.y,this.attackBox.width,this.attackBox.height),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y>=a-96?(this.velocity.y=0,this.position.y=330):this.velocity.y+=C}},{key:"attack",value:function(){(new Date).getTime()-this.lastTimeAttack>=this.attackSpeed&&(this.switchSprite("attack1"),this.isAttacking=!0,this.lastTimeAttack=(new Date).getTime())}},{key:"takeHit",value:function(e){this.health-=Math.abs(e-.5*this.defense),this.health<=0?this.switchSprite("death"):this.switchSprite("takeHit")}},{key:"switchSprite",value:function(e){if(this.image!==this.sprites.death.image){if(!(this.image===this.sprites.attack1.image&&this.framesCurrent<this.sprites.attack1.framesMax-1)&&!(this.image===this.sprites.takeHit.image&&this.framesCurrent<this.sprites.takeHit.framesMax-1))switch(e){case"idle":this.image!==this.sprites.idle.image&&(this.image=this.sprites.idle.image,this.framesMax=this.sprites.idle.framesMax,this.framesCurrent=0);break;case"run":this.image!==this.sprites.run.image&&(this.image=this.sprites.run.image,this.framesMax=this.sprites.run.framesMax,this.framesCurrent=0);break;case"jump":this.image!==this.sprites.jump.image&&(this.image=this.sprites.jump.image,this.framesMax=this.sprites.jump.framesMax,this.framesCurrent=0);break;case"fall":this.image!==this.sprites.fall.image&&(this.image=this.sprites.fall.image,this.framesMax=this.sprites.fall.framesMax,this.framesCurrent=0);break;case"attack1":this.image!==this.sprites.attack1.image&&(this.image=this.sprites.attack1.image,this.framesMax=this.sprites.attack1.framesMax,this.framesCurrent=0);break;case"takeHit":this.image!==this.sprites.takeHit.image&&(this.image=this.sprites.takeHit.image,this.framesMax=this.sprites.takeHit.framesMax,this.framesCurrent=0);break;case"death":this.image!==this.sprites.death.image&&(this.image=this.sprites.death.image,this.framesMax=this.sprites.death.framesMax,this.framesCurrent=0)}}else this.framesCurrent===this.sprites.death.framesMax-1&&(this.dead=!0)}},{key:"updateFigures",value:function(e){this.velocity=e.velocity,this.lastKey=e.lastKey,this.isJumping=e.isJumping,this.attackBox=e.attackBox,this.isAttacking=e.isAttacking,this.health=e.health,this.framesCurrent=e.framesCurrent,this.framesElapsed=e.framesElapsed,this.framesHold=e.framesHold,this.sprites=e.sprites,this.dead=e.dead,this.lastTimeAttack=e.lastTimeAttack,this.keys=e.keys}}]),t}(F);o.clearRect(0,0,1024,576),N=new F({position:{x:0,y:0},imageSrc:window.origin+"/img/background.png"}),_=new F({position:{x:600,y:128},imageSrc:window.origin+"/img/shop.png",scale:2.75,framesMax:6});var z={hero:{position:{x:296.5,y:100},velocity:{x:0,y:0},imageSrc:"/img/hero/Idle.png",framesMax:11,scale:2.5,color:"blue",offset:{x:140,y:55},sprites:{idle:{imageSrc:"/img/hero/Idle.png",framesMax:11},run:{imageSrc:"/img/hero/Run.png",framesMax:8},jump:{imageSrc:"/img/hero/Jump.png",framesMax:4},fall:{imageSrc:"/img/hero/Fall.png",framesMax:4},attack1:{imageSrc:"/img/hero/Attack.png",framesMax:6},takeHit:{imageSrc:"/img/hero/Take Hit.png",framesMax:4},death:{imageSrc:"/img/hero/Death.png",framesMax:9}},attackBox:{offset:{x:90,y:80},width:80,height:50},minX:6,maxX:945,attackSpeed:"700",damage:"50",defense:"39",hp:"700.53"},heroEnemy:{position:{x:666.5,y:100},velocity:{x:0,y:0},imageSrc:"/img/heroEnemy/Idle.png",framesMax:11,scale:2.5,color:"blue",offset:{x:140,y:55},sprites:{idle:{imageSrc:"/img/heroEnemy/Idle.png",framesMax:11},run:{imageSrc:"/img/heroEnemy/Run.png",framesMax:8},jump:{imageSrc:"/img/heroEnemy/Jump.png",framesMax:4},fall:{imageSrc:"/img/heroEnemy/Fall.png",framesMax:4},attack1:{imageSrc:"/img/heroEnemy/Attack.png",framesMax:6},takeHit:{imageSrc:"/img/heroEnemy/Take Hit.png",framesMax:4},death:{imageSrc:"/img/heroEnemy/Death.png",framesMax:9}},attackBox:{offset:{x:-95,y:80},width:80,height:50},minX:6,maxX:945,attackSpeed:"700",damage:"50",defense:"39",hp:"700.53"},samuraiMack:{position:{x:306.5,y:0},velocity:{x:0,y:0},imageSrc:"/img/samuraiMack/Idle.png",framesMax:8,color:"red",scale:2.5,offset:{x:215,y:157},sprites:{idle:{imageSrc:"/img/samuraiMack/Idle.png",framesMax:8},run:{imageSrc:"/img/samuraiMack/Run.png",framesMax:8},jump:{imageSrc:"/img/samuraiMack/Jump.png",framesMax:2},fall:{imageSrc:"/img/samuraiMack/Fall.png",framesMax:2},attack1:{imageSrc:"/img/samuraiMack/Attack1.png",framesMax:6},takeHit:{imageSrc:"/img/samuraiMack/Take Hit.png",framesMax:4},death:{imageSrc:"/img/samuraiMack/Death.png",framesMax:6}},attackBox:{offset:{x:100,y:50},width:160,height:50},minX:10,maxX:940,attackSpeed:"200",damage:"60.4",defense:"31.5",hp:"665"},samuraiMackEnemy:{position:{x:656.5,y:0},velocity:{x:0,y:0},imageSrc:"/img/samuraiMackEnemy/Idle.png",framesMax:8,scale:2.5,color:"blue",offset:{x:215,y:157},sprites:{idle:{imageSrc:"/img/samuraiMackEnemy/Idle.png",framesMax:8},run:{imageSrc:"/img/samuraiMackEnemy/Run.png",framesMax:8},jump:{imageSrc:"/img/samuraiMackEnemy/Jump.png",framesMax:2},fall:{imageSrc:"/img/samuraiMackEnemy/Fall.png",framesMax:2},attack1:{imageSrc:"/img/samuraiMackEnemy/Attack1.png",framesMax:6},takeHit:{imageSrc:"/img/samuraiMackEnemy/Take Hit.png",framesMax:4},death:{imageSrc:"/img/samuraiMackEnemy/Death.png",framesMax:6}},attackBox:{offset:{x:-170,y:50},width:160,height:50},maxX:940,minX:10,attackSpeed:"200",damage:"60.4",defense:"31.5",hp:"665"},warrior:{position:{x:296.5,y:0},velocity:{x:0,y:0},imageSrc:"/img/warrior/Idle.png",framesMax:10,scale:2.5,color:"red",offset:{x:165,y:100},sprites:{idle:{imageSrc:"/img/warrior/Idle.png",framesMax:10},run:{imageSrc:"/img/warrior/Run.png",framesMax:8},jump:{imageSrc:"/img/warrior/Jump.png",framesMax:3},fall:{imageSrc:"/img/warrior/Fall.png",framesMax:3},attack1:{imageSrc:"/img/warrior/Attack1.png",framesMax:7},takeHit:{imageSrc:"/img/warrior/Take Hit.png",framesMax:3},death:{imageSrc:"/img/warrior/Death.png",framesMax:7}},attackBox:{offset:{x:80,y:65},width:90,height:40},minX:5,maxX:945,attackSpeed:"900",damage:"71.3",defense:"36.5",hp:"635"},warriorEnemy:{position:{x:686.5,y:0},velocity:{x:0,y:0},imageSrc:"/img/warriorEnemy/Idle.png",framesMax:10,scale:2.5,color:"blue",offset:{x:165,y:100},sprites:{idle:{imageSrc:"/img/warriorEnemy/Idle.png",framesMax:10},run:{imageSrc:"/img/warriorEnemy/Run.png",framesMax:8},jump:{imageSrc:"/img/warriorEnemy/Jump.png",framesMax:3},fall:{imageSrc:"/img/warriorEnemy/Fall.png",framesMax:3},attack1:{imageSrc:"/img/warriorEnemy/Attack1.png",framesMax:7},takeHit:{imageSrc:"/img/warriorEnemy/Take Hit.png",framesMax:3},death:{imageSrc:"/img/warriorEnemy/Death.png",framesMax:7}},attackBox:{offset:{x:-90,y:65},width:90,height:40},minX:5,maxX:945,attackSpeed:"900",damage:"71.3",defense:"36.5",hp:"635"},wizard:{position:{x:266.5,y:0},velocity:{x:0,y:0},imageSrc:"/img/wizard/Idle.png",framesMax:6,scale:1.5,color:"red",offset:{x:115,y:60},sprites:{idle:{imageSrc:"/img/wizard/Idle.png",framesMax:6},run:{imageSrc:"/img/wizard/Run.png",framesMax:8},jump:{imageSrc:"/img/wizard/Jump.png",framesMax:2},fall:{imageSrc:"/img/wizard/Fall.png",framesMax:2},attack1:{imageSrc:"/img/wizard/Attack1.png",framesMax:8},takeHit:{imageSrc:"/img/wizard/Take Hit.png",framesMax:4},death:{imageSrc:"/img/wizard/Death.png",framesMax:7}},attackBox:{offset:{x:100,y:65},width:90,height:50},minX:5,maxX:925,attackSpeed:"800",damage:"50.576",defense:"51",hp:"663"},wizardEnemy:{position:{x:656.5,y:0},velocity:{x:0,y:0},imageSrc:"/img/wizardEnemy/Idle.png",framesMax:6,scale:1.5,color:"blue",offset:{x:115,y:60},sprites:{idle:{imageSrc:"/img/wizardEnemy/Idle.png",framesMax:6},run:{imageSrc:"/img/wizardEnemy/Run.png",framesMax:8},jump:{imageSrc:"/img/wizardEnemy/Jump.png",framesMax:2},fall:{imageSrc:"/img/wizardEnemy/Fall.png",framesMax:2},attack1:{imageSrc:"/img/wizardEnemy/Attack1.png",framesMax:8},takeHit:{imageSrc:"/img/wizardEnemy/Take Hit.png",framesMax:4},death:{imageSrc:"/img/wizardEnemy/Death.png",framesMax:7}},attackBox:{offset:{x:-75,y:65},width:90,height:50},minX:5,maxX:925,attackSpeed:"800",damage:"50.576",defense:"51",hp:"663"}};S=new U(z[d.players[0].champion]),M=new U(z[d.players[1].champion+"Enemy"]),O=requestAnimationFrame(L),k.emit("player_load_completely",{roomId:d.roomId,playerIndex:v.isHost?0:1}),k.on("start_game",x),k.on("receive_action",j),k.on("game_over",function(){D(),B()}),k.on("battle_update",function(e){a.current&&(a.current.innerHTML=e)})}return console.log("use effect"),function(){console.log("use effect clean up"),cancelAnimationFrame(O),S=null,M=null,_=null,N=null,A=!1,k.off("start_game"),k.off("receive_action"),k.off("game_over"),k.off("battle_update")}},[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:window.origin+"/img/background_full.png"}),r.a.createElement("div",{className:"main_page_container"},r.a.createElement("div",{className:"fight_screen",style:{backgroundImage:"url(".concat(window.origin+"/img/outline.png")}},r.a.createElement("div",{className:"outline"},r.a.createElement("div",{className:"health"},r.a.createElement("div",{className:"lose_health"}),r.a.createElement("div",{id:"playerHealth"})),r.a.createElement("div",{ref:a,id:"timer"},"10"),r.a.createElement("div",{className:"health"},r.a.createElement("div",{className:"lose_health"}),r.a.createElement("div",{id:"enemyHealth"})),r.a.createElement("div",null)),r.a.createElement("div",{id:"displayText"},"Tie"),r.a.createElement("div",{id:"startGame",onClick:function(e){e.preventDefault(),A&&T.replace("/waiting-room")},style:{display:A?"block":"none",marginTop:A?"30%":"auto"}},r.a.createElement("div",null,r.a.createElement("img",{width:"270",height:"110",src:window.origin+"/img/fight.png"}),r.a.createElement("p",{className:"h5"},A?"Back to room":"Wait for enemy"))),r.a.createElement("canvas",{width:1024,height:576,ref:e}))),r.a.createElement("div",{ref:t,className:"timeStart"}))},j=(t(290),t(612)),H=(t(292),Object.freeze({SET_DATA:"SET_DATA",CLEAR_DATA:"CLEAR_DATA"})),I=function(e){return{type:H.SET_DATA,payload:e}},R=function(){return{type:H.CLEAR_DATA}};var D=function(){var e=Object(c.c)(function(e){return e.app}),a=e.currentRoom,t=e.playerDetail,n=Object(c.b)(),s=Object(x.f)(),o=Object(i.useState)(!0),m=Object(E.a)(o,2),l=m[0],u=m[1];function g(e){if(e){var a=e;a.players[1].status=!1,n(I({currentRoom:Object(p.a)({},a),playerDetail:Object(p.a)({},t,{status:!1})})),s.push("/fight")}}function h(){setTimeout(function(){n(R()),s.replace("/")},200)}function d(e,i){k.emit("player_change_status",{roomId:a.roomId,newStatus:{key:e,value:i},currentPlayerIndex:t.isHost?0:1})}return Object(i.useEffect)(function(){l&&(k.emit("load_room",{roomId:a.roomId}),u(!1)),k.on("player_join",function(e){n(I({currentRoom:e}))}),k.on("host_leave_room",function(){a&&a.players&&a.players.length>1&&(alert("Host left room"),h())}),k.on("room_has_update",function(e){n(I({currentRoom:e}))}),k.on("room_start",g)},[l,u]),r.a.createElement("div",null,r.a.createElement("div",{className:"home_body",style:{backgroundImage:"url('".concat(window.origin,"/img/background_home.png')")}},r.a.createElement("div",{className:"home_body__list_bg"},r.a.createElement("div",{className:"home_body__list_bg_list"},r.a.createElement("div",{className:"room_list_area"},r.a.createElement("div",{style:{height:10}}),r.a.createElement("div",{className:"room_detail"},r.a.createElement("div",null,"ID:\xa0",a&&a.roomId?a.roomId:"",r.a.createElement("br",null),"Name:\xa0",a&&a.roomName?a.roomName:""),r.a.createElement("span",{className:"ml-auto"},"Deposit:",r.a.createElement("br",null),r.a.createElement("img",{src:window.origin+"/img/coin.png",width:"30",height:"30"}),a&&a.deposit?a.deposit:"")),r.a.createElement("div",{className:"in_room_body"},r.a.createElement("div",{className:"content_left",style:{border:a&&a.players&&a.players[0]&&a.players[0].status?"5px solid green":"none"}},r.a.createElement("div",{className:"text-center"},a&&a.players&&a.players[0]&&a.players[0].playerName?a.players[0].playerName:""),t.isHost&&r.a.createElement("div",{className:"my-3"},r.a.createElement("select",{value:a&&a.players&&a.players[0]&&a.players[0].champion||"hero",onChange:function(e){e.preventDefault();var t=a;t.players[0].champion=e.target.value,n(I({currentRoom:t})),d("champion",e.target.value)}},r.a.createElement("option",{value:"hero"},"Hero"),r.a.createElement("option",{value:"samuraiMack"},"Samurai Mack"),r.a.createElement("option",{value:"warrior"},"Warrior"),r.a.createElement("option",{value:"wizard"},"Wizard"))),a&&a.players&&a.players[0]&&a.players[0].champion?r.a.createElement("div",null,r.a.createElement("img",{src:window.origin+"/img/"+a.players[0].champion+"/waiting.gif"})):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:"vl"}),r.a.createElement("div",{className:"content_right",style:{border:a&&a.players&&a.players[1]&&a.players[1].status||t&&t.status?"5px solid green":"none"}},r.a.createElement("div",{className:"text-center"},a&&a.players&&a.players[1]&&a.players[1].playerName?a.players[1].playerName:""),!t.isHost&&r.a.createElement("div",{className:"my-3"},r.a.createElement("select",{value:a&&a.players&&a.players[1]&&a.players[1].champion||"hero",onChange:function(e){e.preventDefault();var t=a;t.players[1].champion=e.target.value,n(I({currentRoom:t})),d("champion",e.target.value)}},r.a.createElement("option",{value:"hero"},"Hero"),r.a.createElement("option",{value:"samuraiMack"},"Samurai Mack"),r.a.createElement("option",{value:"warrior"},"Warrior"),r.a.createElement("option",{value:"wizard"},"Wizard"))),a&&a.players&&a.players[1]&&a.players[1].champion?r.a.createElement("div",null,r.a.createElement("img",{src:window.origin+"/img/"+a.players[1].champion+"/waiting.gif"})):r.a.createElement(r.a.Fragment,null))),r.a.createElement("div",{className:"footer"},r.a.createElement(j.a,{className:"mr-5",variant:"danger",onClick:function(){k.emit("player_leave_room",{roomId:a.roomId,isHost:t.isHost}),h()}},"Leave room"),r.a.createElement(j.a,{onClick:function(){t.isHost?a.players&&a.players.length>1&&a.players[1].status&&k.emit("host_start_room",{currentRoom:a},g):(n(I({playerDetail:Object(p.a)({},t,{status:!t.status})})),d("status",!t.status))},variant:a&&a.players&&a.players[1]&&a.players[1].status||t&&t.status?"warning":"primary"},t&&t.isHost?"Start":a&&a.players&&a.players[1]&&a.players[1].status||t&&t.status?"Unready":"Ready")))))))},L=t(263),B=t(610),F=t(611);var U=function(e){var a=Object(i.useState)(!1),t=Object(E.a)(a,2),n=t[0],s=t[1],o=Object(i.useState)(!0),m=Object(E.a)(o,2),l=m[0],u=m[1],p=Object(i.useState)([]),g=Object(E.a)(p,2),h=g[0],d=g[1],f=e.data,y=Object(c.b)();function w(){k.emit("get_list_room",function(e){e?d(Object.values(e)):h.length>0&&d([])})}return Object(i.useEffect)(function(){var e=!1;if(!e)return k.on("connect",function(){console.log("connect successfully")}),k.on("error",function(e){console.error("Connection error: ",e)}),k.on("reconnect",function(){console.log("Reconnecting")}),k.on("disconnect",function(e){console.log("reason",e),"io server disconnect"===e&&k.connect()}),function(){e=!1}},[]),Object(i.useEffect)(function(){var e=!1;if(!e)return l&&!e&&(w(),u(!1)),k.on("new_room_created",function(e){d(function(a){var t=[e].concat(Object(L.a)(a));return console.log("newData",e),console.log(a),t.length>9&&t.pop(),t})}),k.on("room_update",function(e){d(function(a){var t=a.findIndex(function(a){return e.roomId===a.roomId}),i=a;return t>=0&&(i[t]=e),i})}),k.on("room_delete",function(e){e&&d(function(a){var t=a.findIndex(function(a){return e.roomId===a.roomId}),i=a;return t>=0&&i.splice(t,1),i})}),function(){e=!0}},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"room_list_area"},r.a.createElement("div",{className:"body"},r.a.createElement("ul",null,h&&h.length>0&&h.map(function(a,t){return a?r.a.createElement("li",{onClick:function(t){var i;t.preventDefault(),2===t.detail&&(i=a,k.emit("join_room",{roomId:i.roomId,player:f},function(a){a?0===a.errCode?(y(I({currentRoom:a.data,playerDetail:a.data.players[1]})),e.history.push("/waiting-room")):(alert(a.errMessage),w()):alert("Error when join room")}))},key:t},r.a.createElement("div",null,"ID: ",function(e){if(!e)return"";var a=e.length;return e.slice(0,4)+"..."+e.slice(a-4,a)}(a.roomId)),r.a.createElement("div",null,a.roomName||""),r.a.createElement("div",null,r.a.createElement("img",{src:window.origin+"/img/coin.png",width:"30",height:"30",className:"d-inline-block align-top",alt:""}),r.a.createElement("span",null,a.deposit||"")),r.a.createElement("div",null,a.players?a.players.length:"","/2\xa0"),r.a.createElement("div",null,a.isStart?"Playing":"Waiting")):r.a.createElement(r.a.Fragment,null)}))),r.a.createElement("div",{className:"w-100 text-center m-3 gap"},r.a.createElement(j.a,{variant:"light",className:"mr-3"},"\u2190"),r.a.createElement(j.a,{variant:"light"},"\u2192")),r.a.createElement("div",{className:"footer"},r.a.createElement(j.a,{className:"mr-5",variant:"light",onClick:function(){w()}},"Refresh data"),r.a.createElement(j.a,{onClick:function(){s(!0)}},"Create room"))),r.a.createElement(B.a,{show:n,onHide:function(){return s(!1)}},r.a.createElement(B.a.Dialog,null,r.a.createElement(B.a.Header,null,r.a.createElement(B.a.Title,null,"CREATE ROOM")),r.a.createElement(B.a.Body,null,r.a.createElement(F.a,{onSubmit:function(a){a.preventDefault(),k.emit("create_room",{roomName:a.target.roomName.value,player:f,deposit:parseInt(a.target.deposit.value)},function(a){console.log("create room"),a?(e.history.push("/waiting-room"),y(I({currentRoom:a.data,playerDetail:a.data.players[0]}))):(alert("error when creating room"),console.log(a.errMessage),w())})}},r.a.createElement(F.a.Group,{className:"mb-3",controlId:"roomName"},r.a.createElement(F.a.Label,null,"Room's name"),r.a.createElement(F.a.Control,{required:!0,type:"text",placeholder:"Enter name",autoFocus:!0})),r.a.createElement(F.a.Group,{className:"mb-3",controlId:"deposit"},r.a.createElement(F.a.Label,null,"Deposit"),r.a.createElement(F.a.Control,{required:!0,type:"number",min:10,placeholder:"Deposit"})),r.a.createElement(B.a.Footer,null,r.a.createElement(j.a,{variant:"secondary",onClick:function(){return s(!1)}},"Close"),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Create")))))))},z=Object.freeze({LOGIN_USER:"LOGIN_USER",LOGOUT_USER:"LOGOUT_USER"}),X=function(e){return{type:z.LOGIN_USER,payload:e}};var J=function(e){var a=e.isLoggedIn,t=e.data,i=Object(c.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-dark bg-dark flex-md-nowrap p-0 shadow"},r.a.createElement("a",{className:"navbar-brand col-sm-3 col-md-2 mr-0",href:"http://github.com/augustustung",target:"_blank",rel:"noopener noreferrer"},"Hero Fight"),r.a.createElement("ul",{className:"navbar-nav px-3"},r.a.createElement("li",{className:"nav-item text-nowrap d-none d-sm-none d-sm-block"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:window.origin+"/img/coin.png",width:"30",height:"30",className:"d-inline-block align-top",alt:""}),r.a.createElement("small",{className:"user_balance"},t&&t.balance?t.balance:"0")):r.a.createElement("button",{className:"button_collect_wallet",onClick:function(e){e.preventDefault(),i(X({userId:1,username:"tung",balance:1e3,address:"",champion:"hero"}))}},r.a.createElement("img",{src:window.origin+"/img/login.webp"}),r.a.createElement("span",null,"Login"))))),r.a.createElement("div",{className:"home_body",style:{backgroundImage:"url('".concat(window.origin,"/img/background_home.png')")}},r.a.createElement("div",{className:"home_body__list_bg"},r.a.createElement("div",{className:"home_body__list_bg_list"},r.a.createElement(e.Component,e)))))},K=t(106),G={Home:{component:o,path:"/",isAuth:!1},FindRoom:{component:U,path:"/",isAuth:!1},WaittingRoom:{component:D,path:"/waiting-room",isAuth:!0},Fight:{component:T,path:"/fight",isAuth:!0}};var W=function(){var e=Object(c.c)(function(e){return e.user}),a=e.isLoggedIn;return r.a.createElement("main",{className:"main_container"},r.a.createElement(K.a,null,r.a.createElement(x.c,null,e&&a?r.a.createElement(x.a,{path:"/",exact:!0,component:function(a){return r.a.createElement(J,Object.assign({},e,a,{Component:U}))}}):r.a.createElement(x.a,{path:"/",exact:!0,component:function(e){return r.a.createElement(J,Object.assign({},e,{Component:o}))}}),Object.keys(G).map(function(e,t){return a&&G[e].isAuth?r.a.createElement(x.a,{key:t,extract:!0,path:G[e].path,component:G[e].component}):G[e].isAuth?void 0:r.a.createElement(x.a,{path:G[e].path,key:t,exact:!0,component:function(a){return r.a.createElement(J,Object.assign({},a,{Component:G[e].component}))}})}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=t(92),q=t(261),Q=(t(313),Object.freeze({CONNECTION_REQUEST:"CONNECTION_REQUEST",CONNECTION_SUCCESS:"CONNECTION_SUCCESS",CONNECTION_FAILED:"CONNECTION_FAILED",UPDATE_ACCOUNT:"UPDATE_ACCOUNT"})),$={loading:!1,account:null,lipToken:null,web3:null,errMesg:""},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Q.CONNECTION_REQUEST:return Object(p.a)({},$,{loading:!0});case Q.CONNECTION_SUCCESS:return Object(p.a)({},$,{account:a.payload.account,loading:!1,lipToken:a.payload.lipToken,web3:a.payload.web3});case Q.CONNECTION_FAILED:return Object(p.a)({},$,{loading:!1,errMesg:a.payload});case Q.UPDATE_ACCOUNT:return Object(p.a)({},$,{account:a.payload});default:return e}},Y=Object.freeze({CHECK_DATA_REQUEST:"CHECK_DATA_REQUEST",CHECK_DATA_SUCCESS:"CHECK_DATA_SUCCESS",CHECK_DATA_FAILED:"CHECK_DATA_FAILED"}),Z={loading:!1,allLips:[],allOwnerLips:[],error:!1,errorMsg:""},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Y.CHECK_DATA_REQUEST:return Object(p.a)({},Z,{loading:!0});case Y.CHECK_DATA_SUCCESS:return Object(p.a)({},Z,{loading:!1,allLips:a.payload.allLips,allOwnerLips:a.payload.allOwnerLips});case Y.CHECK_DATA_FAILED:return Object(p.a)({},Z,{loading:!1,error:!0,errorMsg:a.payload});default:return e}},ae={isLoggedIn:!1,data:{}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case z.LOGIN_USER:return Object(p.a)({},e,{isLoggedIn:!0,data:a.payload});case z.LOGOUT_USER:window.location.reload();break;default:return e}},ie={playerDetail:{},currentRoom:{}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case H.SET_DATA:return a.payload&&a.payload.playerDetail&&Object.keys(a.payload.playerDetail).length>2||delete a.payload.playerDetail,Object(p.a)({},e,a.payload);case H.CLEAR_DATA:return{playerDetail:{},currentRoom:{}};default:return e}},ne=Object(P.b)({blockchain:V,data:ee,user:te,app:re}),se=[q.a],oe=Object(P.c)(P.a.apply(void 0,se)),ce=Object(P.d)(ne,oe);s.a.render(r.a.createElement(c.a,{store:ce},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[268,2,1]]]);
//# sourceMappingURL=main.5438b4d8.chunk.js.map